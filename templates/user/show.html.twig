{% extends 'base.html.twig' %}
{% block javascripts %}
    <script>
        document.addEventListener('turbo:load', function() {
            // Désactiver Turbo pour cette page
            Turbo.session.drive = false;
        });
    </script>
{% endblock %}

{% block title %}Profil de {{user.prenom }} {{ user.nom }}{% endblock %}

{% block body %}
    <h1>Profil de {{user.prenom }} {{ user.nom }}</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Photo</th>
                    <td>
                    {% if user.photo != null %}
                        <img src="{{ asset('uploads/utilisateurs/' ~ user.photo) }}" alt="{{ user.prenom }}">
                    {% else %}
                        <img src="{{ asset('uploads/utilisateurs/logo.avif') }}" alt="photo par défaut">

                    {% endif %}
                    </td>

            </tr>
            <tr>
                <th>Email</th>
                <td>{{ user.email }}</td>
            </tr>
            <tr>
                <th>Nom</th>
                <td>{{ user.nom }}</td>
            </tr>
            <tr>
                <th>Prénom</th>
                <td>{{ user.prenom }}</td>
            </tr>
            <tr>
                <th>Date de Naissance</th>
                <td>{{ user.dateNaissance ? user.dateNaissance|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>Adresse</th>
                <td>{{ user.adresse }}</td>
            </tr>
            <tr>
                <th>Telephone</th>
                <td>{{ user.telephone }}</td>
            </tr>

            <tr>
                <th>Téléphone de la personne à contacter</th>
                <td>{{ user.telPersContact }}</td>
            </tr>
            <tr>
                <th>Allergies</th>
                <td>{{ user.allergies }}</td>
            </tr>
            <tr>
                <th>Médecin Traitant</th>
                <td>{{ user.medecinTraitant }}</td>
            </tr>
            <tr>
                <th>Téléphone Médecin</th>
                <td>{{ user.telMedecin }}</td>
            </tr>
            <tr>
                <th>Droit à l'Image</th>
                <td>{{ user.droitImage ? 'Oui' : 'Non' }}</td>
            </tr>
            <tr>
                <th>Informations</th>
                <td>{{ user.infos }}</td>
            </tr>
        </tbody>
    </table>

    <a href="{{ path('app_user_index') }}">retour à la liste</a>

    {% if app.user and app.user.id == user.id or 'ROLE_ADMIN' in app.user.roles%}
        <a href="{{ path('app_user_edit', {'id': user.id}) }}">Modifier</a>
    {{ include('user/_delete_form.html.twig') }}
    {% endif %}
{% endblock %}
